


Дэн Берг Джонсон, Дэниел Деоган, Дэниел Савано предисловие Дэниела Терхорста-Норта Безопасно by design 2021 ББК 32.973-018 УДК 004.4 Д34 Джонсон Дэн Берг, Деоган Дэниел, Савано Дэниел Д34 Безопасно by design. — СПб.: Питер, 2021. — 432 с.: ил. — (Серия «Библиотека

программиста»). ISBN 978-5-4461-1507-5 «Безопасно by Design» не похожа на другие книги по безопасности. В ней нет дискуссий на такие классические темы, как переполнение буфера или слабые места в криптографических хэш-функциях.

Вместо собственно безопасности она концентрируется на подходах к разработке ПО. Поначалу это может показаться немного странным, но вы поймете, что недостатки безопасности часто вызваны пло­ хим дизайном. Значительного количества уязвимостей можно избежать, используя передовые методы

проектирования. Изучение того, как дизайн программного обеспечения соотносится с безопасностью, является целью этой книги. Вы узнаете, почему дизайн важен для безопасности и как его использовать для создания безопасного программного обеспечения.

16+ (В соответствии с Федеральным законом от 29 декабря 2010 г. № 436-ФЗ.) ББК 32.973-018 УДК 004.4 Права на издание получены по соглашению с Manning Publications. Все права защищены. Никакая часть данной

книги не может быть воспроизведена в какой бы то ни было форме без письменного разрешения владельцев авторских прав. Информация, содержащаяся в данной книге, получена из источников, рассматриваемых издательством как на­

дежные. Тем не менее, имея в виду возможные человеческие или технические ошибки, издательство не может гарантировать абсолютную точность и полноту приводимых сведений и не несет ответственности за возможные

ошибки, связанные с использованием книги. Издательство не несет ответственности за доступность материалов, ссылки на которые вы можете найти в этой книге. На момент подготовки книги к изданию все ссылки на интернет-

ресурсы были действующими. ISBN 978-1617294358 англ. © 2019 by Manning Publications Co. All rights reserved. ISBN 978-5-4461-1507-5 © Перевод на русский язык ООО Издательство «Питер», 2021 © Издание на русском языке, оформление ООО Издательство «Питер», 2021

© Серия «Библиотека программиста», 2021 © Павлов А., перевод с английского языка, 2021 Краткое содержание Предисловие............................................................................................................... 14

Введение..................................................................................................................... 18 Благодарности........................................................................................................... 20

О книге........................................................................................................................ 22 Об авторах.................................................................................................................. 26

Об иллюстрации на обложке................................................................................... 27 Часть I. Введение Глава 1. Роль проектирования в безопасности............................................................. 30

Глава 2. Антракт: анти-«Гамлет»................................................................................. 62 Часть II. Основы Глава 3. Основные концепции предметно-ориентированного проектирования............. 82

Глава 4. Концепции программирования, способствующие безопасности..................... 125 Глава 5. Доменные примитивы................................................................................... 155

Глава 6. Обеспечение целостности состояния............................................................ 182 Глава 7. Упрощение состояния................................................................................... 212

Глава 8. Роль процесса доставки кода в безопасности............................................... 240 Глава 9. Безопасная обработка сбоев......................................................................... 279

Глава 10. Преимущества облачного мышления.......................................................... 309 Глава 11. Перерыв: страховой полис задаром............................................................ 341

Часть III. Применение основ на практике Глава 12. Руководство по устаревшему коду.............................................................. 360 Глава 13. Руководство по микросервисам.................................................................. 390

Глава 14. В заключение: не забывайте о безопасности!............................................. 413 Оглавление Предисловие............................................................................................................... 14

Введение..................................................................................................................... 18 Благодарности........................................................................................................... 20

О книге........................................................................................................................ 22 Для кого эта книга................................................................................................ 22

Структура книги.................................................................................................... 23 О коде................................................................................................................... 24

От издательства.................................................................................................... 25 Об авторах.................................................................................................................. 26

Об иллюстрации на обложке................................................................................... 27 Часть I. Введение Глава 1. Роль проектирования в безопасности............................................................. 30


### Безопасность как неотъемлемое свойство системы................................................ 32 1.1.1.	 Ограбление банка Öst-Götha, 1854 год....................................................... 32

1.1.2.	 Элементы безопасности и безопасность в целом........................................ 34 1.1.3.	 Категории требований к безопасности: CIA-T............................................. 36 1.2.	 Что такое проектирование.................................................................................... 37


### Традиционный подход к безопасности ПО и его недостатки.................................. 40 1.3.1.	 Безопасность требует к себе отдельного внимания.................................... 42 1.3.2.	 Все должны быть специалистами по безопасности..................................... 43

1.3.3.	 Нужно знать обо всех уязвимостях, даже о неизвестных в данный момент....................................................................................... 43 1.4.	 Обеспечение безопасности за счет проектирования.............................................. 43

1.4.1.	 Делаем пользователя изначально защищенным......................................... 44 1.4.2.	 Преимущества подхода, основанного на проектировании.......................... 47 1.4.3.	 Сочетание разных подходов...................................................................... 50


### Строки, XML и атака billion laughs.......................................................................... 51 1.5.1.	 XML............................................................................................................ 51

Оглавление    7 1.5.2.	 Краткий обзор внутренних XML-сущностей................................................. 52 1.5.3.	 Атака Billion Laughs.................................................................................... 53

1.5.4.	 Конфигурация XML-анализатора................................................................ 53 1.5.5.	 Решение проблемы за счет проектирования.............................................. 55 1.5.6.	 Применение операционных ограничений................................................... 58

1.5.7.	 Обеспечение глубокой безопасности......................................................... 59 Резюме.......................................................................................................................... 60

Глава 2. Антракт: анти-«Гамлет»................................................................................. 62 2.1.	 Книжный интернет-магазин с нарушением бизнес-целостности............................. 65

2.1.1.	 Принцип работы журнала дебиторской задолженности.............................. 67 2.1.2.	 Как система складского учета отслеживает книги в магазине.................... 68 2.1.3.	 Отправка антикниг..................................................................................... 69

2.1.4.	 Системы верят в одну и ту же ложь........................................................... 70 2.1.5.	 Самодельная скидка.................................................................................. 71


### Поверхностное моделирование............................................................................. 72 2.2.1.	 Откуда берутся поверхностные модели...................................................... 74

2.2.2.	 Опасности, связанные с неявными концепциями........................................ 75 2.3.	 Глубокое моделирование...................................................................................... 76

2.3.1.	 Как возникают глубокие модели................................................................ 77 2.3.2.	 Пусть неявное становится явным............................................................... 79

Резюме.......................................................................................................................... 80 Часть II. Основы Глава 3. Основные концепции предметно-ориентированного проектирования............. 82


### Модели как средства обеспечения более глубокого понимания............................. 84 3.1.1.	 Модель — это упрощенная версия реальности........................................... 87 3.1.2.	 Модели должны быть строгими.................................................................. 90

3.1.3.	 Модели вбирают в себя глубокое понимание предметной области............. 94 3.1.4.	 Модель не создают, а выбирают................................................................ 96 3.1.5.	 Модель формирует единый язык................................................................ 98


### Составные элементы модели............................................................................... 101 3.2.1.	 Сущности................................................................................................. 102

3.2.2.	 Объекты-значения................................................................................... 106 3.2.3.	 Агрегаты.................................................................................................. 110


### Ограниченные контексты.................................................................................... 114 3.3.1.	 Семантика единого языка........................................................................ 114

3.3.2.	 Отношения между языком, моделью и ограниченным контекстом............ 115 3.3.3.	 Определение ограниченного контекста.................................................... 116 3.4.	 Взаимодействие между контекстами.................................................................... 119

3.4.1.	 Использование одной модели в двух контекстах...................................... 119 3.4.2.	 Создание карты контекстов..................................................................... 121

Резюме........................................................................................................................ 123 8    Оглавление Глава 4. Концепции программирования, способствующие безопасности..................... 125

